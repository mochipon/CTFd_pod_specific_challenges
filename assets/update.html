{% extends "admin/challenges/update.html" %}

{% block message %}
<div class="form-group">
    <label for="new-desc-editor">
        Challenge Description: <span class="badge bg-warning text-dark mx-1 px-1">Pod-Aware</span>
        <small class="form-text text-muted">
            Use Markdown to describe the challenge. Include <code>:pod_id:</code> tokens to dynamically
            insert the assigned pod number for each team. The description will be rendered with
            team-specific pod information when viewed by participants.
        </small>
    </label>
    <textarea
        id="new-desc-editor"
        class="form-control markdown"
        name="description"
        rows="10"
    >{{ challenge.description }}</textarea>
    <div class="form-text d-flex justify-content-end">
        <button type="button" class="btn btn-outline-info btn-sm" data-toggle="modal" data-target="#token-preview">
            <i class="fas fa-eye me-1"></i>
            Preview Tokens
        </button>
    </div>
</div>

<!-- Token Preview Modal -->
<div class="modal fade" id="token-preview" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-eye me-2"></i>
                    Pod Token Preview
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
            </div>
            <div class="modal-body">
                <p class="text-muted mb-3">
                    Preview how your description will appear to teams in different pods:
                </p>
                <div class="row">
                    <div class="col-md-12">
                        <h6 class="text-primary">Pod 1 Preview:</h6>
                        <textarea id="preview-pod-1" class="form-control mb-2" rows="10" readonly>No description yet...</textarea>
                    </div>
                    <div class="col-md-12">
                        <h6 class="text-success">Pod 2 Preview:</h6>
                        <textarea id="preview-pod-2" class="form-control mb-2" rows="10" readonly>No description yet...</textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
